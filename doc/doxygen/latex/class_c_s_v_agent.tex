\doxysection{CSVAgent Class Reference}
\hypertarget{class_c_s_v_agent}{}\label{class_c_s_v_agent}\index{CSVAgent@{CSVAgent}}


{\ttfamily \#include $<$csv\+\_\+agent.\+h$>$}

Inheritance diagram for CSVAgent\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_c_s_v_agent}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_c_s_v_agent_a275de926a3477234fed57eb399b6e675}{CSVAgent}} (\mbox{\hyperlink{class_c_a_n}{CAN}} \texorpdfstring{$\ast$}{*}bus, const std\+::string \&\mbox{\hyperlink{class_agent_afab9e97454c47bfad2220991d3d73b37}{name}}, \mbox{\hyperlink{class_agent_addb4d1988cc4fd0a7ae7df049c0be775}{Unit}} unit, \mbox{\hyperlink{class_message_ad27a1a9986e5a2b019993f6c1d2e77b4}{Type}} type, \mbox{\hyperlink{class_agent_a2abe9226c41ade78a1cc022926011e79}{Address}} \mbox{\hyperlink{class_agent_a374fceb89c2d3d53046ac128d2a50415}{address}}, \mbox{\hyperlink{component__functions_8hpp_a09035d123daa3e7131b0f583a140371c}{Data\+Producer}} producer, \mbox{\hyperlink{component__functions_8hpp_a53233b5baa21df43948d115fa1f102a1}{Response\+Handler}} handler, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{struct_component_data}{Component\+Data}} $>$ \mbox{\hyperlink{protocol_8h_aa1e4d9d59a0086ac69bc32be878e18cb}{data}}, bool \mbox{\hyperlink{class_agent_acbe540cfd323fcd18db620e2265b40d9}{external}})
\item 
\mbox{\hyperlink{class_c_s_v_agent_af1702e3e97c115bbf988a3be8bacbbe6}{\texorpdfstring{$\sim$}{\string~}\+CSVAgent}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{class_agent}{Agent}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_agent_af463a1789fba270f3c71bbc341497ea0}{Agent}} (\mbox{\hyperlink{class_c_a_n}{CAN}} \texorpdfstring{$\ast$}{*}bus, const std\+::string \&\mbox{\hyperlink{class_agent_afab9e97454c47bfad2220991d3d73b37}{name}}, \mbox{\hyperlink{class_agent_addb4d1988cc4fd0a7ae7df049c0be775}{Unit}} unit, \mbox{\hyperlink{class_message_ad27a1a9986e5a2b019993f6c1d2e77b4}{Type}} type, \mbox{\hyperlink{class_agent_a2abe9226c41ade78a1cc022926011e79}{Address}} \mbox{\hyperlink{class_agent_a374fceb89c2d3d53046ac128d2a50415}{address}}, \mbox{\hyperlink{component__functions_8hpp_a09035d123daa3e7131b0f583a140371c}{Data\+Producer}} producer, \mbox{\hyperlink{component__functions_8hpp_a53233b5baa21df43948d115fa1f102a1}{Response\+Handler}} handler, std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{struct_component_data}{Component\+Data}} $>$ \mbox{\hyperlink{protocol_8h_aa1e4d9d59a0086ac69bc32be878e18cb}{data}}, bool \mbox{\hyperlink{class_agent_acbe540cfd323fcd18db620e2265b40d9}{external}}=true)
\begin{DoxyCompactList}\small\item\em Constructor for EPOS-\/inspired \doxylink{class_agent}{Agent} using composition. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_agent_ab8dd8d152605cf1339fed595376e83cb}{\texorpdfstring{$\sim$}{\string~}\+Agent}} ()
\begin{DoxyCompactList}\small\item\em Destructor with proper cleanup order. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_agent_a18a67129d2455bca64c43adf093567a6}{Value}} \mbox{\hyperlink{class_agent_af986ce4308578cfb41ac891fb43477d6}{get}} (\mbox{\hyperlink{class_agent_addb4d1988cc4fd0a7ae7df049c0be775}{Unit}} unit)
\begin{DoxyCompactList}\small\item\em Get data using function pointer instead of virtual method. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_agent_ac8304f2fb2ab35287394c772b59fe73c}{handle\+\_\+response}} (\mbox{\hyperlink{class_agent_a9469bca2c85eba8cb1c55ff157202ee5}{Message}} \texorpdfstring{$\ast$}{*}msg)
\begin{DoxyCompactList}\small\item\em Handle response using function pointer instead of virtual method. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_agent_a4a0d9642e1fa211160f67ab27320ec97}{send}} (\mbox{\hyperlink{class_agent_addb4d1988cc4fd0a7ae7df049c0be775}{Unit}} unit, \mbox{\hyperlink{class_agent_a22777b5e3a3b3d46961799fc6abb1a86}{Microseconds}} period)
\item 
int \mbox{\hyperlink{class_agent_a661a2c3e4ac1cc143eae7062cbac0fae}{receive}} (\mbox{\hyperlink{class_agent_a9469bca2c85eba8cb1c55ff157202ee5}{Message}} \texorpdfstring{$\ast$}{*}msg)
\item 
bool \mbox{\hyperlink{class_agent_a927dadd25d2b8e6172c18ead37c554cf}{running}} ()
\item 
void \mbox{\hyperlink{class_agent_acbe540cfd323fcd18db620e2265b40d9}{external}} (const bool external)
\item 
const bool \mbox{\hyperlink{class_agent_ab9e9da9e9a66227bca835dab3780d366}{external}} () const
\item 
std\+::string \mbox{\hyperlink{class_agent_afab9e97454c47bfad2220991d3d73b37}{name}} () const
\item 
void \mbox{\hyperlink{class_agent_af8b714e0188b27f2294fdc138cad0190}{set\+\_\+csv\+\_\+logger}} (const std\+::string \&log\+\_\+dir)
\item 
void \mbox{\hyperlink{class_agent_a7a400be6500ceb7df23bf6d18ebf3a8d}{log\+\_\+message}} (const \mbox{\hyperlink{class_agent_a9469bca2c85eba8cb1c55ff157202ee5}{Message}} \&msg, const std\+::string \&direction)
\item 
int \mbox{\hyperlink{class_agent_ad438098d30b55b16ba88401f70a3bce2}{start\+\_\+periodic\+\_\+interest}} (\mbox{\hyperlink{class_agent_addb4d1988cc4fd0a7ae7df049c0be775}{Unit}} unit, \mbox{\hyperlink{class_agent_a22777b5e3a3b3d46961799fc6abb1a86}{Microseconds}} period)
\begin{DoxyCompactList}\small\item\em Start sending periodic INTEREST messages for the specified unit and period. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_agent_a7846bb6027785d01803b71da1e667760}{stop\+\_\+periodic\+\_\+interest}} ()
\begin{DoxyCompactList}\small\item\em Stop sending periodic INTEREST messages. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_agent_a7d5fd455d10924542f6b838e76cfd3c0}{send\+\_\+interest}} (\mbox{\hyperlink{class_agent_addb4d1988cc4fd0a7ae7df049c0be775}{Unit}} unit)
\begin{DoxyCompactList}\small\item\em Send a single INTEREST message (called by periodic thread) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_agent_a06e90b6d019c3767897664144be0abe8}{update\+\_\+interest\+\_\+period}} (\mbox{\hyperlink{class_agent_a22777b5e3a3b3d46961799fc6abb1a86}{Microseconds}} new\+\_\+period)
\begin{DoxyCompactList}\small\item\em Update the period for periodic interest sending. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_c_s_v_agent_a63b5cadfd153cb1d6a57780292f857ee}{reply}} (\mbox{\hyperlink{class_agent_addb4d1988cc4fd0a7ae7df049c0be775}{Unit}} unit)
\begin{DoxyCompactList}\small\item\em Reply method that calls function pointer instead of virtual method. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{class_agent}{Agent}}}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{class_agent_a475c095d790fd809a4c4f54cdc8eb478}{thread\+\_\+running}} ()
\item 
int \mbox{\hyperlink{class_agent_abdd1927b5e75313e89c56dc9eea71929}{can\+\_\+send}} (\mbox{\hyperlink{class_agent_a9469bca2c85eba8cb1c55ff157202ee5}{Message}} \texorpdfstring{$\ast$}{*}msg)
\item 
\mbox{\hyperlink{class_agent_a2abe9226c41ade78a1cc022926011e79}{Address}} \mbox{\hyperlink{class_agent_a374fceb89c2d3d53046ac128d2a50415}{address}} () const
\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Public Types inherited from \mbox{\hyperlink{class_agent}{Agent}}}
\begin{DoxyCompactItemize}
\item 
typedef \mbox{\hyperlink{class_c_a_n_a5933787c2150df4898c4ba8c6a4c2268}{CAN\+::\+Message}} \mbox{\hyperlink{class_agent_a9469bca2c85eba8cb1c55ff157202ee5}{Message}}
\item 
typedef \mbox{\hyperlink{class_message_a9503881ced5ab90d776a921d5e29e27f}{Message\+::\+Origin}} \mbox{\hyperlink{class_agent_a2abe9226c41ade78a1cc022926011e79}{Address}}
\item 
typedef \mbox{\hyperlink{class_message_a6a16dfdcb8a3f35650440459b673ebbe}{Message\+::\+Array}} \mbox{\hyperlink{class_agent_a18a67129d2455bca64c43adf093567a6}{Value}}
\item 
typedef \mbox{\hyperlink{class_message_adc63ad6ff6d68eb4f0c9a0c730bd5ab4}{Message\+::\+Unit}} \mbox{\hyperlink{class_agent_addb4d1988cc4fd0a7ae7df049c0be775}{Unit}}
\item 
typedef \mbox{\hyperlink{class_message_ad27a1a9986e5a2b019993f6c1d2e77b4}{Message\+::\+Type}} \mbox{\hyperlink{class_agent_a252b1a14b8f711d1ba6a25a2c80da6f3}{Type}}
\item 
typedef \mbox{\hyperlink{class_message_a8d96e96af236b29707044cc25f30c568}{Message\+::\+Microseconds}} \mbox{\hyperlink{class_agent_a22777b5e3a3b3d46961799fc6abb1a86}{Microseconds}}
\item 
typedef \mbox{\hyperlink{class_periodic___thread}{Periodic\+\_\+\+Thread}}$<$ \mbox{\hyperlink{class_agent}{Agent}} $>$ \mbox{\hyperlink{class_agent_a7938da6b695346da93afc23d43a987e0}{Thread}}
\item 
typedef \mbox{\hyperlink{class_c_a_n_a359d8413dfaf202bdaa027d33286fd4f}{CAN\+::\+Observer}} \mbox{\hyperlink{class_agent_a5d52ad1b2c84ad64f59744e9be7d1b3f}{Observer}}
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions inherited from \mbox{\hyperlink{class_agent}{Agent}}}
\begin{DoxyCompactItemize}
\item 
static void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{class_agent_adbfbd8895294995d262be9ff18b26485}{run}} (void \texorpdfstring{$\ast$}{*}arg)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes inherited from \mbox{\hyperlink{class_agent}{Agent}}}
\begin{DoxyCompactItemize}
\item 
static const unsigned int \mbox{\hyperlink{class_agent_a39e9645b8248c543fde7c43e51c5cffb}{\+\_\+units\+\_\+per\+\_\+vehicle}} = 5
\item 
static constexpr int \mbox{\hyperlink{class_agent_a016b6c0d56b5ed4961f9e773f9e7e081}{MAX\+\_\+\+RESPONSES\+\_\+\+PER\+\_\+\+INTEREST}} = 5
\end{DoxyCompactItemize}


\label{doc-constructors}
\Hypertarget{class_c_s_v_agent_doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_c_s_v_agent_a275de926a3477234fed57eb399b6e675}\index{CSVAgent@{CSVAgent}!CSVAgent@{CSVAgent}}
\index{CSVAgent@{CSVAgent}!CSVAgent@{CSVAgent}}
\doxysubsubsection{\texorpdfstring{CSVAgent()}{CSVAgent()}}
{\footnotesize\ttfamily \label{class_c_s_v_agent_a275de926a3477234fed57eb399b6e675} 
CSVAgent\+::\+CSVAgent (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_c_a_n}{CAN}} \texorpdfstring{$\ast$}{*}}]{bus}{, }\item[{const std\+::string \&}]{name}{, }\item[{\mbox{\hyperlink{class_agent_addb4d1988cc4fd0a7ae7df049c0be775}{Unit}}}]{unit}{, }\item[{\mbox{\hyperlink{class_message_ad27a1a9986e5a2b019993f6c1d2e77b4}{Type}}}]{type}{, }\item[{\mbox{\hyperlink{class_agent_a2abe9226c41ade78a1cc022926011e79}{Address}}}]{address}{, }\item[{\mbox{\hyperlink{component__functions_8hpp_a09035d123daa3e7131b0f583a140371c}{Data\+Producer}}}]{producer}{, }\item[{\mbox{\hyperlink{component__functions_8hpp_a53233b5baa21df43948d115fa1f102a1}{Response\+Handler}}}]{handler}{, }\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{struct_component_data}{Component\+Data}} $>$}]{data}{, }\item[{bool}]{external}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\Hypertarget{class_c_s_v_agent_af1702e3e97c115bbf988a3be8bacbbe6}\index{CSVAgent@{CSVAgent}!````~CSVAgent@{\texorpdfstring{$\sim$}{\string~}CSVAgent}}
\index{````~CSVAgent@{\texorpdfstring{$\sim$}{\string~}CSVAgent}!CSVAgent@{CSVAgent}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}CSVAgent()}{\string~CSVAgent()}}
{\footnotesize\ttfamily \label{class_c_s_v_agent_af1702e3e97c115bbf988a3be8bacbbe6} 
CSVAgent\+::\texorpdfstring{$\sim$}{\string~}\+CSVAgent (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



\label{doc-func-members}
\Hypertarget{class_c_s_v_agent_doc-func-members}
\doxysubsection{Member Function Documentation}
\Hypertarget{class_c_s_v_agent_a63b5cadfd153cb1d6a57780292f857ee}\index{CSVAgent@{CSVAgent}!reply@{reply}}
\index{reply@{reply}!CSVAgent@{CSVAgent}}
\doxysubsubsection{\texorpdfstring{reply()}{reply()}}
{\footnotesize\ttfamily \label{class_c_s_v_agent_a63b5cadfd153cb1d6a57780292f857ee} 
void CSVAgent\+::reply (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_agent_addb4d1988cc4fd0a7ae7df049c0be775}{Unit}}}]{unit}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Reply method that calls function pointer instead of virtual method. 

This is the critical method where the race condition used to occur. Instead of calling the virtual \doxylink{class_agent_af986ce4308578cfb41ac891fb43477d6}{get()} method, we now call the function pointer directly, eliminating the vtable dependency. 

Reimplemented from \mbox{\hyperlink{class_agent_adee5474d6762bc0ccfbfd86df1824ec5}{Agent}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/api/framework/\mbox{\hyperlink{csv__agent_8h}{csv\+\_\+agent.\+h}}\end{DoxyCompactItemize}
