\doxysection{Clock Class Reference}
\hypertarget{class_clock}{}\label{class_clock}\index{Clock@{Clock}}


Thread-\/safe singleton for PTP clock synchronization.  




{\ttfamily \#include $<$clock.\+h$>$}

\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum class \mbox{\hyperlink{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bda}{State}} \{ \mbox{\hyperlink{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bdaa96b1cef9e0248eb415e510c98e4ad2b1}{UNSYNCHRONIZED}}
, \mbox{\hyperlink{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bdaa64900a01baa6706d53db08f39b9259bd}{AWAITING\+\_\+\+SECOND\+\_\+\+MSG}}
, \mbox{\hyperlink{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bdaa35c25b3993876576ae1222f9ebb04f63}{SYNCHRONIZED}}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_clock_aaadf4fd3494f23514024098c2d0c9134}{Clock}} (const \mbox{\hyperlink{class_clock}{Clock}} \&)=delete
\item 
\mbox{\hyperlink{class_clock}{Clock}} \& \mbox{\hyperlink{class_clock_a21bfcb54d1da00cea13a357ea5d8696c}{operator=}} (const \mbox{\hyperlink{class_clock}{Clock}} \&)=delete
\item 
void \mbox{\hyperlink{class_clock_a2cc3f3a5fe94bcdfcd45e83936f6c513}{set\+Self\+Id}} (\mbox{\hyperlink{clock_8h_a7da5de846d393d9b4a1a00ad9c7f7eec}{Leader\+Id\+Type}} id)
\begin{DoxyCompactList}\small\item\em Set the self ID for this clock instance (node\textquotesingle{}s own PTP-\/relevant ID) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_clock_a5cc4fda803bea0fe083ecd7cfebca43c}{activate}} (const \mbox{\hyperlink{struct_ptp_relevant_data}{Ptp\+Relevant\+Data}} \texorpdfstring{$\ast$}{*}new\+\_\+msg\+\_\+data)
\begin{DoxyCompactList}\small\item\em Activate the state machine with new PTP data. \end{DoxyCompactList}\item 
\mbox{\hyperlink{clock_8h_aa3c3737ae755c2234a30d313aa8b0c06}{Timestamp\+Type}} \mbox{\hyperlink{class_clock_a9f373864d63fa4886f025cc521d1681b}{get\+Synchronized\+Time}} (bool \texorpdfstring{$\ast$}{*}is\+\_\+synchronized)
\begin{DoxyCompactList}\small\item\em Get the current synchronized time. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_clock_ad3fe983739dee8a41196e8b32944ed48}{is\+Fully\+Synchronized}} () const
\begin{DoxyCompactList}\small\item\em Check if clock is fully synchronized. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bda}{State}} \mbox{\hyperlink{class_clock_a011c0dbf8a1ebc4e61269805bc0ea32d}{get\+State}} ()
\begin{DoxyCompactList}\small\item\em Get current synchronization state. \end{DoxyCompactList}\item 
\mbox{\hyperlink{clock_8h_a7da5de846d393d9b4a1a00ad9c7f7eec}{Leader\+Id\+Type}} \mbox{\hyperlink{class_clock_a709e756b0a780c395a711d04cf6c3eff}{get\+Current\+Leader}} () const
\begin{DoxyCompactList}\small\item\em Get the current PTP leader ID. \end{DoxyCompactList}\item 
\mbox{\hyperlink{clock_8h_aa3c3737ae755c2234a30d313aa8b0c06}{Timestamp\+Type}} \mbox{\hyperlink{class_clock_a6d700b0a82c49d281747430069ef0db1}{get\+Local\+Steady\+Hardware\+Time}} () const
\item 
\mbox{\hyperlink{clock_8h_aa3c3737ae755c2234a30d313aa8b0c06}{Timestamp\+Type}} \mbox{\hyperlink{class_clock_aa30983826ccc0feb58436921b1d1b5e1}{get\+Local\+System\+Time}} ()
\item 
\mbox{\hyperlink{clock_8h_ac9b36752fe8dc0a5e6a756cc671179c6}{Duration\+Type}} \mbox{\hyperlink{class_clock_a500605886bf252683db2fe59efe652ba}{get\+Max\+Leader\+Silence\+Interval}} () const
\item 
void \mbox{\hyperlink{class_clock_a0ab5423b0a997aa13d7b6131c46d1358}{reset}} ()
\begin{DoxyCompactList}\small\item\em Reset the \doxylink{class_clock}{Clock} singleton to its initial state (for testing only) \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{class_clock}{Clock}} \& \mbox{\hyperlink{class_clock_ab177004c1bc5df14899133b1e18c9bdb}{get\+Instance}} ()
\begin{DoxyCompactList}\small\item\em Get the singleton instance. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Thread-\/safe singleton for PTP clock synchronization. 

This class is thread-\/safe and can be accessed from multiple threads. All state access is protected by mutex locks. The singleton instance is initialized in a thread-\/safe manner using C++11\textquotesingle{}s static initialization guarantees. 

\label{doc-enum-members}
\Hypertarget{class_clock_doc-enum-members}
\doxysubsection{Member Enumeration Documentation}
\Hypertarget{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bda}\index{Clock@{Clock}!State@{State}}
\index{State@{State}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{State}{State}}
{\footnotesize\ttfamily \label{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bda} 
enum class \mbox{\hyperlink{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bda}{Clock\+::\+State}}\hspace{0.3cm}{\ttfamily [strong]}}

\begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{UNSYNCHRONIZED@{UNSYNCHRONIZED}!Clock@{Clock}}\index{Clock@{Clock}!UNSYNCHRONIZED@{UNSYNCHRONIZED}}}\Hypertarget{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bdaa96b1cef9e0248eb415e510c98e4ad2b1}\label{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bdaa96b1cef9e0248eb415e510c98e4ad2b1} 
UNSYNCHRONIZED&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{AWAITING\_SECOND\_MSG@{AWAITING\_SECOND\_MSG}!Clock@{Clock}}\index{Clock@{Clock}!AWAITING\_SECOND\_MSG@{AWAITING\_SECOND\_MSG}}}\Hypertarget{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bdaa64900a01baa6706d53db08f39b9259bd}\label{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bdaa64900a01baa6706d53db08f39b9259bd} 
AWAITING\+\_\+\+SECOND\+\_\+\+MSG&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{SYNCHRONIZED@{SYNCHRONIZED}!Clock@{Clock}}\index{Clock@{Clock}!SYNCHRONIZED@{SYNCHRONIZED}}}\Hypertarget{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bdaa35c25b3993876576ae1222f9ebb04f63}\label{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bdaa35c25b3993876576ae1222f9ebb04f63} 
SYNCHRONIZED&\\
\hline

\end{DoxyEnumFields}


\label{doc-constructors}
\Hypertarget{class_clock_doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_clock_aaadf4fd3494f23514024098c2d0c9134}\index{Clock@{Clock}!Clock@{Clock}}
\index{Clock@{Clock}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{Clock()}{Clock()}}
{\footnotesize\ttfamily \label{class_clock_aaadf4fd3494f23514024098c2d0c9134} 
Clock\+::\+Clock (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_clock}{Clock}} \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



\label{doc-func-members}
\Hypertarget{class_clock_doc-func-members}
\doxysubsection{Member Function Documentation}
\Hypertarget{class_clock_a5cc4fda803bea0fe083ecd7cfebca43c}\index{Clock@{Clock}!activate@{activate}}
\index{activate@{activate}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{activate()}{activate()}}
{\footnotesize\ttfamily \label{class_clock_a5cc4fda803bea0fe083ecd7cfebca43c} 
void Clock\+::activate (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_ptp_relevant_data}{Ptp\+Relevant\+Data}} \texorpdfstring{$\ast$}{*}}]{new\+\_\+msg\+\_\+data}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Activate the state machine with new PTP data. 


\begin{DoxyParams}{Parameters}
{\em new\+\_\+msg\+\_\+data} & PTP data from incoming message or nullptr for timeout checks\\
\hline
\end{DoxyParams}
Thread-\/safe\+: Protected by mutex \Hypertarget{class_clock_a709e756b0a780c395a711d04cf6c3eff}\index{Clock@{Clock}!getCurrentLeader@{getCurrentLeader}}
\index{getCurrentLeader@{getCurrentLeader}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{getCurrentLeader()}{getCurrentLeader()}}
{\footnotesize\ttfamily \label{class_clock_a709e756b0a780c395a711d04cf6c3eff} 
\mbox{\hyperlink{clock_8h_a7da5de846d393d9b4a1a00ad9c7f7eec}{Leader\+Id\+Type}} Clock\+::get\+Current\+Leader (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Get the current PTP leader ID. 

\begin{DoxyReturn}{Returns}
Current leader ID
\end{DoxyReturn}
Thread-\/safe\+: Protected by mutex \Hypertarget{class_clock_ab177004c1bc5df14899133b1e18c9bdb}\index{Clock@{Clock}!getInstance@{getInstance}}
\index{getInstance@{getInstance}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{getInstance()}{getInstance()}}
{\footnotesize\ttfamily \label{class_clock_ab177004c1bc5df14899133b1e18c9bdb} 
\mbox{\hyperlink{class_clock}{Clock}} \& Clock\+::get\+Instance (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Get the singleton instance. 

\begin{DoxyReturn}{Returns}
Reference to the singleton instance
\end{DoxyReturn}
Thread-\/safe\+: Uses C++11\textquotesingle{}s static initialization guarantees \Hypertarget{class_clock_a6d700b0a82c49d281747430069ef0db1}\index{Clock@{Clock}!getLocalSteadyHardwareTime@{getLocalSteadyHardwareTime}}
\index{getLocalSteadyHardwareTime@{getLocalSteadyHardwareTime}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{getLocalSteadyHardwareTime()}{getLocalSteadyHardwareTime()}}
{\footnotesize\ttfamily \label{class_clock_a6d700b0a82c49d281747430069ef0db1} 
\mbox{\hyperlink{clock_8h_aa3c3737ae755c2234a30d313aa8b0c06}{Timestamp\+Type}} Clock\+::get\+Local\+Steady\+Hardware\+Time (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\Hypertarget{class_clock_aa30983826ccc0feb58436921b1d1b5e1}\index{Clock@{Clock}!getLocalSystemTime@{getLocalSystemTime}}
\index{getLocalSystemTime@{getLocalSystemTime}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{getLocalSystemTime()}{getLocalSystemTime()}}
{\footnotesize\ttfamily \label{class_clock_aa30983826ccc0feb58436921b1d1b5e1} 
\mbox{\hyperlink{clock_8h_aa3c3737ae755c2234a30d313aa8b0c06}{Timestamp\+Type}} Clock\+::get\+Local\+System\+Time (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\Hypertarget{class_clock_a500605886bf252683db2fe59efe652ba}\index{Clock@{Clock}!getMaxLeaderSilenceInterval@{getMaxLeaderSilenceInterval}}
\index{getMaxLeaderSilenceInterval@{getMaxLeaderSilenceInterval}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{getMaxLeaderSilenceInterval()}{getMaxLeaderSilenceInterval()}}
{\footnotesize\ttfamily \label{class_clock_a500605886bf252683db2fe59efe652ba} 
\mbox{\hyperlink{clock_8h_ac9b36752fe8dc0a5e6a756cc671179c6}{Duration\+Type}} Clock\+::get\+Max\+Leader\+Silence\+Interval (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\Hypertarget{class_clock_a011c0dbf8a1ebc4e61269805bc0ea32d}\index{Clock@{Clock}!getState@{getState}}
\index{getState@{getState}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{getState()}{getState()}}
{\footnotesize\ttfamily \label{class_clock_a011c0dbf8a1ebc4e61269805bc0ea32d} 
\mbox{\hyperlink{class_clock_a5ea60a8cfa56e8ea89ff4e4baa198bda}{Clock\+::\+State}} Clock\+::get\+State (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Get current synchronization state. 

\begin{DoxyReturn}{Returns}
Current state
\end{DoxyReturn}
Thread-\/safe\+: Protected by mutex \Hypertarget{class_clock_a9f373864d63fa4886f025cc521d1681b}\index{Clock@{Clock}!getSynchronizedTime@{getSynchronizedTime}}
\index{getSynchronizedTime@{getSynchronizedTime}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{getSynchronizedTime()}{getSynchronizedTime()}}
{\footnotesize\ttfamily \label{class_clock_a9f373864d63fa4886f025cc521d1681b} 
\mbox{\hyperlink{clock_8h_aa3c3737ae755c2234a30d313aa8b0c06}{Timestamp\+Type}} Clock\+::get\+Synchronized\+Time (\begin{DoxyParamCaption}\item[{bool \texorpdfstring{$\ast$}{*}}]{is\+\_\+synchronized}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Get the current synchronized time. 

\begin{DoxyReturn}{Returns}
Current PTP-\/synchronized timestamp
\end{DoxyReturn}
Thread-\/safe\+: Protected by mutex \Hypertarget{class_clock_ad3fe983739dee8a41196e8b32944ed48}\index{Clock@{Clock}!isFullySynchronized@{isFullySynchronized}}
\index{isFullySynchronized@{isFullySynchronized}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{isFullySynchronized()}{isFullySynchronized()}}
{\footnotesize\ttfamily \label{class_clock_ad3fe983739dee8a41196e8b32944ed48} 
bool Clock\+::is\+Fully\+Synchronized (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Check if clock is fully synchronized. 

\begin{DoxyReturn}{Returns}
true if in SYNCHRONIZED state
\end{DoxyReturn}
Thread-\/safe\+: Protected by mutex \Hypertarget{class_clock_a21bfcb54d1da00cea13a357ea5d8696c}\index{Clock@{Clock}!operator=@{operator=}}
\index{operator=@{operator=}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \label{class_clock_a21bfcb54d1da00cea13a357ea5d8696c} 
\mbox{\hyperlink{class_clock}{Clock}} \& Clock\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_clock}{Clock}} \&}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\Hypertarget{class_clock_a0ab5423b0a997aa13d7b6131c46d1358}\index{Clock@{Clock}!reset@{reset}}
\index{reset@{reset}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily \label{class_clock_a0ab5423b0a997aa13d7b6131c46d1358} 
void Clock\+::reset (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Reset the \doxylink{class_clock}{Clock} singleton to its initial state (for testing only) 

This method is NOT thread-\/safe and should only be used in test setup/teardown. \Hypertarget{class_clock_a2cc3f3a5fe94bcdfcd45e83936f6c513}\index{Clock@{Clock}!setSelfId@{setSelfId}}
\index{setSelfId@{setSelfId}!Clock@{Clock}}
\doxysubsubsection{\texorpdfstring{setSelfId()}{setSelfId()}}
{\footnotesize\ttfamily \label{class_clock_a2cc3f3a5fe94bcdfcd45e83936f6c513} 
void Clock\+::set\+Self\+Id (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{clock_8h_a7da5de846d393d9b4a1a00ad9c7f7eec}{Leader\+Id\+Type}}}]{id}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Set the self ID for this clock instance (node\textquotesingle{}s own PTP-\/relevant ID) 


\begin{DoxyParams}{Parameters}
{\em id} & The \doxylink{clock_8h_a7da5de846d393d9b4a1a00ad9c7f7eec}{Leader\+Id\+Type} of this node\\
\hline
\end{DoxyParams}
Thread-\/safe\+: Protected by mutex 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/api/framework/\mbox{\hyperlink{clock_8h}{clock.\+h}}\end{DoxyCompactItemize}
